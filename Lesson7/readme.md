This is JackenQuake repository.
Synchronized with GitHub.

### Tasks description for Lesson 7:

Lesson 7 task done.

#### Комментарии:

Задание к уроку 7 выполнено.

Логирование подключено; явную работу с консолью я оставил только в Booking.Worker и Notification.Notifier, поскольку они через консоль имитируют взаимодействие с пользователем.

Аудит подключен; мониторинг подключен.

Написаны тесты на все консьюмеры; выявилась ошибка в настройках саги - событие Expire отправлялось слишком быстро (стояла задерка в 1 сек) и система не доходила до подтверждения. Сага исправлена, теперь все тесты проходят.

Кроме того, в тестах кухня и ресторан не получали сообщения о заказе, поскольку использовали общее хранилище идентификаторов сообщений для проверки идемпотентности, и второй получатель считал сообщение дублирующим. В основном режиме этой проблемы не возникало, поскольку кухня и ресторан работали в разных приложениях, но в тесте они запускались в пределах одного. Но поскольку в дальнейшем возможно и появление нескольких консьюмеров для одного сообщения в пределах одного приложения - я решил, что каждый консьюмер должен иметь свое хранилище, и переделал его из общего DI-инжектируемого синглтона в объект, явно создаваемый в каждом консьюмере. Возможно, это не идеальное решение, и при переносе хранилища в БД оно все-таки должно будет стать разделяемым, и тогда надо будет в качестве ключей хранить пары (владелец-консьюмер, messageId). Но пока репозиторий в памяти, свое хранилище у каждого консьюмера вполне работает. и я решил не усложнять.